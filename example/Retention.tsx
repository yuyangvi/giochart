import * as React from "react";
import { DrawParamsProps, Source} from "../src/ChartProps";
import Chart from "../src/Chart";
import { retentionSourceSelector } from "../src/utils";

const c = JSON.parse('{"adjust":"stack","chartType":"retention","columns":[{"id":"turn","name":"留存","isDim":true,"isRate":false,"values":["当日","次日","2日后","3日后","4日后","5日后","6日后","7日后","8日后","9日后","10日后","11日后","12日后","13日后"]},{"id":"retention_rate","name":"留存率","isDim":false,"isRate":true},{"id":"retention","name":"留存人数","isDim":false,"isRate":false}],"timeRange":"day:15,1","granularities":[{"id":"tm","interval":"86400000"}],"attrs":{"userType":"uv","range":"day","selection":[]}}');
const s = JSON.parse('[{"turn":0,"retention":55236,"retention_rate":1},{"turn":1,"retention":9731,"retention_rate":0.19688416793120891},{"turn":2,"retention":6333,"retention_rate":0.1459519255145076},{"turn":3,"retention":4811,"retention_rate":0.12941144824618034},{"turn":4,"retention":4548,"retention_rate":0.12809824245155477},{"turn":5,"retention":4103,"retention_rate":0.12228779208392943},{"turn":6,"retention":3606,"retention_rate":0.12850117596750055},{"turn":7,"retention":3312,"retention_rate":0.14852683976859948},{"turn":8,"retention":2115,"retention_rate":0.12724100589580076},{"turn":9,"retention":1186,"retention_rate":0.10846899579293945},{"turn":10,"retention":342,"retention_rate":0.061356297093649086},{"turn":11,"retention":230,"retention_rate":0.06047856955035498},{"turn":12,"retention":145,"retention_rate":0.06128486897717667},{"turn":13,"retention":81,"retention_rate":0.07479224376731301}]');

const c1 = JSON.parse('{"adjust":"stack","timeRange":"day:15,1","granularities":[{"id":"tm","interval":"86400000"}],"attrs":{"selection":[]},"chartType":"retention","columns":[{"id":"tm","name":"起始时间","isDim":true,"isRate":false},{"id":"turn","name":"留存周期","isDim":true,"isRate":false,"values":["次日留存率","7日后留存率"]},{"id":"retention_rate","name":"留存率","isDim":false,"isRate":true},{"id":"retention","name":"留存人数","isDim":false,"isRate":false}]}');
const s1 = JSON.parse('[{"tm":1507132800000,"turn":"1","retention":72,"retention_rate":0.0664819944598338},{"tm":1507219200000,"turn":"1","retention":79,"retention_rate":0.06157443491816056},{"tm":1507305600000,"turn":"1","retention":108,"retention_rate":0.07515657620041753},{"tm":1507392000000,"turn":"1","retention":190,"retention_rate":0.10728402032749859},{"tm":1507478400000,"turn":"1","retention":1274,"retention_rate":0.2376865671641791},{"tm":1507564800000,"turn":"1","retention":1383,"retention_rate":0.24314345991561181},{"tm":1507651200000,"turn":"1","retention":1462,"retention_rate":0.25753038576713055},{"tm":1507737600000,"turn":"1","retention":1392,"retention_rate":0.24154086413326392},{"tm":1507824000000,"turn":"1","retention":401,"retention_rate":0.07304189435336976},{"tm":1507910400000,"turn":"1","retention":173,"retention_rate":0.08862704918032786},{"tm":1507996800000,"turn":"1","retention":260,"retention_rate":0.15550239234449761},{"tm":1508083200000,"turn":"1","retention":1483,"retention_rate":0.23861625100563152},{"tm":1508169600000,"turn":"1","retention":1454,"retention_rate":0.24096784885647995},{"tm":1507132800000,"turn":"7","retention":76,"retention_rate":0.07017543859649122},{"tm":1507219200000,"turn":"7","retention":81,"retention_rate":0.06313328137178488},{"tm":1507305600000,"turn":"7","retention":61,"retention_rate":0.04244954766875435},{"tm":1507392000000,"turn":"7","retention":82,"retention_rate":0.04630152456239413},{"tm":1507478400000,"turn":"7","retention":1037,"retention_rate":0.19347014925373135},{"tm":1507564800000,"turn":"7","retention":950,"retention_rate":0.1670182841068917},{"tm":1507651200000,"turn":"7","retention":1025,"retention_rate":0.18055310903646293}]');

const Retention = (props: any) => (
  <Chart chartParams={c1} source={s1} gridPanel={true} legendEnable={true}/>
);
export default Retention;
