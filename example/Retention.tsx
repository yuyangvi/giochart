import * as React from "react";
import { DrawParamsProps, Source} from "../src/ChartProps";
import Chart from "../src/Chart";
import { retentionSourceSelector } from "../src/utils";

const s = JSON.parse('[{"comparison_value":"_all_","bw":"全部","tm":1505232000000,"turn":"1","retention":1487,"retention_rate":0.25919470106327347},{"comparison_value":"_all_","bw":"全部","tm":1505318400000,"turn":"1","retention":1470,"retention_rate":0.25614218504966024},{"comparison_value":"_all_","bw":"全部","tm":1505404800000,"turn":"1","retention":312,"retention_rate":0.05720572057205721},{"comparison_value":"_all_","bw":"全部","tm":1505491200000,"turn":"1","retention":160,"retention_rate":0.08579088471849866},{"comparison_value":"_all_","bw":"全部","tm":1505577600000,"turn":"1","retention":264,"retention_rate":0.16551724137931034},{"comparison_value":"_all_","bw":"全部","tm":1505664000000,"turn":"1","retention":1537,"retention_rate":0.2686123732960503},{"comparison_value":"_all_","bw":"全部","tm":1505750400000,"turn":"1","retention":1646,"retention_rate":0.24131359038264183},{"comparison_value":"_all_","bw":"全部","tm":1505836800000,"turn":"1","retention":1604,"retention_rate":0.24022764714692227},{"comparison_value":"_all_","bw":"全部","tm":1505923200000,"turn":"1","retention":1452,"retention_rate":0.23628966639544344},{"comparison_value":"_all_","bw":"全部","tm":1506009600000,"turn":"1","retention":448,"retention_rate":0.08129196153148249},{"comparison_value":"_all_","bw":"全部","tm":1506096000000,"turn":"1","retention":186,"retention_rate":0.09126594700686948},{"comparison_value":"_all_","bw":"全部","tm":1506182400000,"turn":"1","retention":277,"retention_rate":0.1653731343283582},{"comparison_value":"_all_","bw":"全部","tm":1506268800000,"turn":"1","retention":1502,"retention_rate":0.25474898236092264},{"comparison_value":"_all_","bw":"全部","tm":1506355200000,"turn":"1","retention":1490,"retention_rate":0.2640439482544746},{"comparison_value":"_all_","bw":"全部","tm":1506441600000,"turn":"1","retention":1475,"retention_rate":0.25347997937789996},{"comparison_value":"_all_","bw":"全部","tm":1506528000000,"turn":"1","retention":1434,"retention_rate":0.2443762781186094},{"comparison_value":"_all_","bw":"全部","tm":1506614400000,"turn":"1","retention":1137,"retention_rate":0.2072926162260711},{"comparison_value":"_all_","bw":"全部","tm":1506700800000,"turn":"1","retention":174,"retention_rate":0.04276234947161465},{"comparison_value":"_all_","bw":"全部","tm":1506787200000,"turn":"1","retention":108,"retention_rate":0.08490566037735849},{"comparison_value":"_all_","bw":"全部","tm":1506873600000,"turn":"1","retention":91,"retention_rate":0.07526881720430108},{"comparison_value":"_all_","bw":"全部","tm":1506960000000,"turn":"1","retention":84,"retention_rate":0.07420494699646643},{"comparison_value":"_all_","bw":"全部","tm":1507046400000,"turn":"1","retention":76,"retention_rate":0.07279693486590039},{"comparison_value":"_all_","bw":"全部","tm":1507132800000,"turn":"1","retention":72,"retention_rate":0.0664819944598338},{"comparison_value":"_all_","bw":"全部","tm":1507219200000,"turn":"1","retention":79,"retention_rate":0.06157443491816056},{"comparison_value":"_all_","bw":"全部","tm":1507305600000,"turn":"1","retention":108,"retention_rate":0.07515657620041753},{"comparison_value":"_all_","bw":"全部","tm":1507392000000,"turn":"1","retention":190,"retention_rate":0.10728402032749859},{"comparison_value":"_all_","bw":"全部","tm":1507478400000,"turn":"1","retention":1274,"retention_rate":0.2376865671641791},{"comparison_value":"_all_","bw":"全部","tm":1507564800000,"turn":"1","retention":1383,"retention_rate":0.24314345991561181},{"comparison_value":"_all_","bw":"全部","tm":1507651200000,"turn":"1","retention":1462,"retention_rate":0.25753038576713055},{"comparison_value":"Safari","bw":"Safari","tm":1505232000000,"turn":"1","retention":126,"retention_rate":0.33962264150943394},{"comparison_value":"Safari","bw":"Safari","tm":1505318400000,"turn":"1","retention":106,"retention_rate":0.27319587628865977},{"comparison_value":"Safari","bw":"Safari","tm":1505404800000,"turn":"1","retention":32,"retention_rate":0.09785932721712538},{"comparison_value":"Safari","bw":"Safari","tm":1505491200000,"turn":"1","retention":21,"retention_rate":0.20588235294117646},{"comparison_value":"Safari","bw":"Safari","tm":1505577600000,"turn":"1","retention":31,"retention_rate":0.3229166666666667},{"comparison_value":"Safari","bw":"Safari","tm":1505664000000,"turn":"1","retention":132,"retention_rate":0.33},{"comparison_value":"Safari","bw":"Safari","tm":1505750400000,"turn":"1","retention":140,"retention_rate":0.311804008908686},{"comparison_value":"Safari","bw":"Safari","tm":1505836800000,"turn":"1","retention":132,"retention_rate":0.2972972972972973},{"comparison_value":"Safari","bw":"Safari","tm":1505923200000,"turn":"1","retention":131,"retention_rate":0.3226600985221675},{"comparison_value":"Safari","bw":"Safari","tm":1506009600000,"turn":"1","retention":41,"retention_rate":0.11988304093567251},{"comparison_value":"Safari","bw":"Safari","tm":1506096000000,"turn":"1","retention":26,"retention_rate":0.20967741935483872},{"comparison_value":"Safari","bw":"Safari","tm":1506182400000,"turn":"1","retention":31,"retention_rate":0.33695652173913043},{"comparison_value":"Safari","bw":"Safari","tm":1506268800000,"turn":"1","retention":133,"retention_rate":0.3159144893111639},{"comparison_value":"Safari","bw":"Safari","tm":1506355200000,"turn":"1","retention":131,"retention_rate":0.3266832917705736},{"comparison_value":"Safari","bw":"Safari","tm":1506441600000,"turn":"1","retention":123,"retention_rate":0.3},{"comparison_value":"Safari","bw":"Safari","tm":1506528000000,"turn":"1","retention":118,"retention_rate":0.3072916666666667},{"comparison_value":"Safari","bw":"Safari","tm":1506614400000,"turn":"1","retention":102,"retention_rate":0.27717391304347827},{"comparison_value":"Safari","bw":"Safari","tm":1506700800000,"turn":"1","retention":20,"retention_rate":0.08196721311475409},{"comparison_value":"Safari","bw":"Safari","tm":1506787200000,"turn":"1","retention":10,"retention_rate":0.20408163265306123},{"comparison_value":"Safari","bw":"Safari","tm":1506873600000,"turn":"1","retention":8,"retention_rate":0.17391304347826086},{"comparison_value":"Safari","bw":"Safari","tm":1506960000000,"turn":"1","retention":7,"retention_rate":0.1590909090909091},{"comparison_value":"Safari","bw":"Safari","tm":1507046400000,"turn":"1","retention":6,"retention_rate":0.1875},{"comparison_value":"Safari","bw":"Safari","tm":1507132800000,"turn":"1","retention":6,"retention_rate":0.12244897959183673},{"comparison_value":"Safari","bw":"Safari","tm":1507219200000,"turn":"1","retention":9,"retention_rate":0.17647058823529413},{"comparison_value":"Safari","bw":"Safari","tm":1507305600000,"turn":"1","retention":10,"retention_rate":0.18181818181818182},{"comparison_value":"Safari","bw":"Safari","tm":1507392000000,"turn":"1","retention":17,"retention_rate":0.22077922077922077},{"comparison_value":"Safari","bw":"Safari","tm":1507478400000,"turn":"1","retention":125,"retention_rate":0.3405994550408719},{"comparison_value":"Safari","bw":"Safari","tm":1507564800000,"turn":"1","retention":121,"retention_rate":0.3408450704225352},{"comparison_value":"Safari","bw":"Safari","tm":1507651200000,"turn":"1","retention":127,"retention_rate":0.315136476426799}]');
const c = JSON.parse('{"adjust":"stack","timeRange":"day:31,1","granularities":[{"id":"tm","interval":"86400000"},{"id":"bw","values":["_all_","Safari"]}],"attrs":{"selection":[0,1]},"chartType":"retention","columns":[{"id":"tm","name":"起始时间","isDim":true,"isRate":false},{"id":"bw","name":"浏览器","isDim":true,"isRate":false},{"id":"comparison_value","name":"对比值","isDim":true,"isRate":false},{"id":"retention_rate","name":"次日留存率","isDim":false,"isRate":true},{"id":"retention","name":"留存人数","isDim":false,"isRate":false}]}');

const c1 = JSON.parse('{"adjust":"stack","timeRange":"day:15,1","granularities":[{"id":"tm","interval":"604800000"},{"id":"city","values":["_all_","成都"]}],"attrs":{"selection":[0,1]},"chartType":"retention","columns":[{"id":"tm","name":"起始时间","isDim":true,"isRate":false},{"id":"city","name":"城市","isDim":true,"isRate":false},{"id":"comparison_value","name":"对比值","isDim":true,"isRate":false},{"id":"retention_rate","name":"次周留存率","isDim":false,"isRate":true},{"id":"retention","name":"留存人数","isDim":false,"isRate":false}]}');
const s1 = JSON.parse('[{"comparison_value":"_all_","city":"全部","tm":1506268800000,"turn":"1","retention":558,"retention_rate":0.058891820580474936},{"comparison_value":"_all_","city":"全部","tm":1506873600000,"turn":"1","retention":618,"retention_rate":0.07559633027522936},{"comparison_value":"成都","city":"成都","tm":1506268800000,"turn":"1","retention":39,"retention_rate":0.10893854748603352},{"comparison_value":"成都","city":"成都","tm":1506873600000,"turn":"1","retention":39,"retention_rate":0.16883116883116883}]');

const c2 = JSON.parse('{"adjust":"stack","timeRange":"day:8,1","granularities":[{"id":"tm","interval":"86400000"},{"id":"action","levels":[{"type":"trigger","excluded":false,"metric":{"id":"3oLklgPW","action":"page","level":"original","filter":{}}},{"type":"trigger","excluded":true,"metric":{"id":"3oLklgPW","action":"page","level":"original","filter":{}}},{"type":"trigger","metric":{"id":"Yo13vGQR","action":"clck","level":"original","filter":{}}}]}],"attrs":{"selection":[0,1,1,1,1,1,2]},"chartType":"retention","columns":[{"id":"turn","name":"留存","isDim":true,"isRate":false,"values":["当日","次日","2日后","3日后","4日后","5日后","6日后"]},{"id":"action","name":"用户行为","isDim":true,"isRate":false},{"id":"comparison_value","name":"对比值","isDim":true,"isRate":false},{"id":"retention_rate","name":"留存率","isDim":false,"isRate":true},{"id":"retention","name":"留存人数","isDim":false,"isRate":false}]}');
const s2 = JSON.parse('[{"retention":9443,"retention_rate":1,"comparison_value":"0","action":"主要功能——概览_页面浏览量","turn":0},{"retention":2894,"retention_rate":0.3908170155300473,"comparison_value":"0","action":"主要功能——概览_页面浏览量","turn":1},{"retention":1767,"retention_rate":0.3245775165319618,"comparison_value":"0","action":"主要功能——概览_页面浏览量","turn":2},{"retention":967,"retention_rate":0.2803711220643665,"comparison_value":"0","action":"主要功能——概览_页面浏览量","turn":3},{"retention":218,"retention_rate":0.15797101449275364,"comparison_value":"0","action":"主要功能——概览_页面浏览量","turn":4},{"retention":112,"retention_rate":0.1362530413625304,"comparison_value":"0","action":"主要功能——概览_页面浏览量","turn":5},{"retention":51,"retention_rate":0.125,"comparison_value":"0","action":"主要功能——概览_页面浏览量","turn":6},{"retention":17536,"retention_rate":1,"comparison_value":"1","action":"(未做过)主要功能——概览_页面浏览量","turn":0},{"retention":1602,"retention_rate":0.1159944971399609,"comparison_value":"1","action":"(未做过)主要功能——概览_页面浏览量","turn":1},{"retention":853,"retention_rate":0.0844972758791481,"comparison_value":"1","action":"(未做过)主要功能——概览_页面浏览量","turn":2},{"retention":384,"retention_rate":0.05998125585754452,"comparison_value":"1","action":"(未做过)主要功能——概览_页面浏览量","turn":3},{"retention":118,"retention_rate":0.03792992606878817,"comparison_value":"1","action":"(未做过)主要功能——概览_页面浏览量","turn":4},{"retention":88,"retention_rate":0.04636459430979979,"comparison_value":"1","action":"(未做过)主要功能——概览_页面浏览量","turn":5},{"retention":37,"retention_rate":0.04228571428571429,"comparison_value":"1","action":"(未做过)主要功能——概览_页面浏览量","turn":6}]');

const Retention = (props: any) => (
  <Chart chartParams={c1} source={s1} gridPanel={true} />
);
export default Retention;
